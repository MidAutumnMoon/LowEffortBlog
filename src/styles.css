@import "/base16_github.css";


@tailwind base;

@layer base {
    html, body {
        @apply overflow-x-hidden relative;
        @apply mx-2 lg:mx-auto lg:max-w-[70ch];
        @apply text-lg lg:text-base;
    }

    a {
        @apply underline;
        @apply text-blue-600 visited:text-blue-800;
    }

    a.external::after {
        @apply inline-block ml-[2px];
        @apply icon-[mdi--external-link];
        @apply text-center text-sm align-middle;
        content: "";
    }
}


@tailwind components;

@layer components {

    /*
        Roll out my own prose because the Tailwind Typography
        does way too much things not to my taste.

        Roughly based on UnoCSS typography though.

        Notice that this uses modern CSS nesting,
        which will certainly break on some devices and IDC. :)
    */
    .prose {

        /*
            Basic margin
         */

        & * {
            @apply my-5;
        }

        /*
            Various Headings
            h5 and h6 are ignored
        */
        & h1,h2,h3,h4 {
            @apply mt-6;

            & .header-anchor {
                /* @apply; */
                @apply text-blue-300/50 ms-1;
                @apply hidden;
            }

            &:hover .header-anchor {
                @apply inline;
            }
        }

        & h1 { @apply text-4xl; }
        & h2 { @apply text-2xl; }
        & h3,h4 { @apply text-xl; }

        /*
            Blocks
         */

        & pre {
            & code { @apply p-0 m-0; }
            @apply border-blue-100 border overflow-x-auto;
            @apply whitespace-pre hyphens-none;
            @apply p-2;
            tab-size: 4;
        }

        & code:not( pre code ) {
            @apply font-mono;
            @apply bg-blue-200/20;
            @apply px-1;
        }

        & blockquote {
            @apply italic;
            @apply border-blue-100 border-[1px] border-l-8;
            @apply ps-2 pe-2 py-1;
            @apply text-gray-500;

            & > * { @apply my-[0.8ch]; }
        }

        & figure {
            & img {
                @apply m-0 mx-auto;
            }
            & figcaption {
                @apply m-0 mt-2;
                @apply text-sm text-gray-400 italic text-center;
            }
        }

        /*
            Lists
         */

        & ol,ul {
            @apply list-outside;
            @apply ps-[2ch];

            & > li {
                @apply m-0;
                & > * { @apply m-0; }
            }
        }

        & ol { @apply list-decimal; }

        & ul { @apply list-disc; }

        & li::marker {
            @apply text-gray-400 text-sm;
        }

        /*
            Multimedia
         */

        & img,svg {
            @apply border-blue-100 border max-w-full h-auto mx-auto;
            @apply text-blue-400/70 italic;
        }

        /*
            Footnote & ToC
         */
        & section.footnotes, section.table-of-content {
            @apply px-6 py-2 mt-8;
            @apply bg-blue-200/20 text-wrap;
        }

        & section.footnotes li {
            @apply my-3;
        }

        & section.table-of-content li {
            @apply my-1;
        }

        /* & sup:has( > a[data-footnote-ref="true"] ) {
            @apply mr-[1px] font-mono;
        } */

    } /* End .prose */

}


@tailwind utilities;
